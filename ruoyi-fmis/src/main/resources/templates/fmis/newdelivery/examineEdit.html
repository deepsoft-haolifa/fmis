<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" >
<head>
    <th:block th:include="include :: header('修改合同管理')" />
    <th:block th:include="include :: datetimepicker-css" />
</head>
<body class="white-bg">
    <div class="wrapper wrapper-content animated fadeInRight ibox-content">
        <form class="form-horizontal m" id="form-data-edit" th:object="${bizProcessData}">
            <input name="dataId" th:field="*{dataId}" type="hidden">
            <input type="hidden" name="bizId" value="newdelivery"/>

            <div class="form-group has-success">
                <label class="col-sm-3 control-label">审批意见：</label>
                <div class="col-sm-8">
                    <select name="examineStatus" id="examineStatus" class="form-control m-b" th:with="type=${@dict.getType('examine_status')}">
                        <option th:each="dict : ${type}" th:text="${dict.dictLabel}" th:value="${dict.dictValue}"></option>
                    </select>
                </div>
            </div>


            <div class="form-group has-success">
                <label class="col-sm-3 control-label" >审批备注：</label>
                <div class="col-sm-8">
                    <textarea name="examineRemark" class="form-control" id="examineRemark"></textarea>
                </div>
            </div>
        </form>


        <div class="form-horizontal" >
            <div class="row">
                <div class="col-sm-12 select-table table-striped">
                    <table id="bootstrap-table" data-use-row-attr-func="true"
                           data-reorderable-rows="true"></table>
                </div>
            </div>
        </div>
    </div>
    <th:block th:include="include :: footer" />
    <th:block th:include="include :: datetimepicker-js" />
    <script type="text/javascript">
        var prefix = ctx + "fmis/newdelivery";
        $("#form-data-edit").validate({
            focusCleanup: true
        });

        function submitHandler() {
            if ($.validate.form()) {
                $.operate.save(prefix + "/doExamine", $('#form-data-edit').serialize());
            }
        }

        $(function() {
            var options = {
                showSearch: false,
                showRefresh: false,
                pagination: false,
                showColumns: false,
                showToggle: false,
                useRowAttrFunc: true,
                uniqueId: "childId",
                async: true,
                url: ctx + "fmis/child/selectBizProcessChildInventoryList",
                //onEditableSave: onEditableSave,
                //rowStyle: tableRowStyle,
                queryParams : {
                    "dataId": $("#dataId").val()
                },
                columns: [{
                    checkbox: true
                },
                    {field : 'rowId',title : '序号',visible: true,formatter:function(value,row,index){row.rowId = index;return index+1;}},

                    {field : 'childId',title : 'childId',visible: false},
                    {field : 'string3',title : '报检单号',editable: false},
                    {field : 'string4',title : '销售合同号'},
                    {field : 'string5',title : '采购合同号',editable: false},
                    {field : 'string2',title : '类型',formatter: function(value, row, index) {
                            var actions = [];
                            if (value == 1) {
                                actions.push('产品');
                            } else if (value == 2) {
                                actions.push('执行器');
                            } else if (value == 3) {
                                actions.push('法兰');
                            } else if (value == 4) {
                                actions.push('螺栓');
                            } else if (value == 5) {
                                actions.push('定位器');
                            } else if (value == 6) {
                                actions.push('电磁阀');
                            } else if (value == 7) {
                                actions.push('回信器数');
                            } else if (value == 8) {
                                actions.push('气源三连件');
                            } else if (value == 9) {
                                actions.push('气源三连件');
                            }
                            return actions.join('');
                        }},
                    {field : 'string6',title : '名称',editable: false},
                    {field : 'string7',title : '型号',editable: false},
                    {field : 'string8',title : '规格',editable: false},
                    {field : 'string9',title : '等级',editable: false},
                    {field : 'string10',title : '价格',editable: false},
                    {field : 'string13',title : '已发货数量',editable: false}

                ]
            };
            $.table.init(options);

        });

    </script>
</body>
</html>